{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alumno\\\\Descargas\\\\proyecto-Rea\\\\frontend\\\\src\\\\components\\\\MetodoPago.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./metodoPago.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MetodoPago() {\n  _s();\n  const [metodo, setMetodo] = useState(\"\");\n  const [nombre, setNombre] = useState(\"\");\n  const [correo, setCorreo] = useState(\"\");\n  const [telefono, setTelefono] = useState(\"\");\n  const [comprobante, setComprobante] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [pedidoInfo, setPedidoInfo] = useState(null);\n  const [procesandoPago, setProcesandoPago] = useState(false);\n  const navigate = useNavigate();\n\n  // Cargar informaci√≥n del pedido desde localStorage\n  useEffect(() => {\n    const pedido = JSON.parse(localStorage.getItem(\"pedidoActual\"));\n    if (pedido) {\n      setPedidoInfo(pedido);\n    } else {\n      navigate('/cart');\n    }\n  }, [navigate]);\n  const datosPago = {\n    \"Banco Pichincha\": {\n      descripcion: \"Transferencia bancaria a la siguiente cuenta:\",\n      cuenta: \"Cuenta Corriente: 2200154789\",\n      titular: \"Juan P√©rez\",\n      cedula: \"C√©dula: 0102030405\",\n      imagen: \"/imagenes/BancoPichincha.png\",\n      tipo: \"transferencia\",\n      comision: 0\n    },\n    \"De Una\": {\n      descripcion: \"Pago r√°pido a trav√©s de la app De Una:\",\n      cuenta: \"N√∫mero de cuenta: 0998765432\",\n      titular: \"Maria G√≥mez\",\n      cedula: \"C√©dula: 1102030405\",\n      imagen: \"/imagenes/DeUna!.png\",\n      tipo: \"transferencia\",\n      comision: 0\n    },\n    \"Produbanco\": {\n      descripcion: \"Transferencia a Produbanco:\",\n      cuenta: \"Cuenta Ahorros: 4567891230\",\n      titular: \"Carlos Torres\",\n      cedula: \"C√©dula: 1702030405\",\n      imagen: \"/imagenes/Produbanco.png\",\n      tipo: \"transferencia\",\n      comision: 0\n    },\n    \"Efectivo\": {\n      descripcion: \"Paga en efectivo al momento de recibir el producto o en nuestras oficinas.\",\n      cuenta: \"\",\n      titular: \"\",\n      cedula: \"\",\n      imagen: \"/imagenes/dinero-removebg-preview.png\",\n      tipo: \"efectivo\",\n      comision: 2.50\n    }\n  };\n\n  // Manejar subida de comprobante\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/gif\", \"application/pdf\"];\n    if (!allowedTypes.includes(file.type)) {\n      mostrarMensaje(\"Formato no v√°lido. Solo JPG, PNG, GIF o PDF.\", \"error\");\n      return;\n    }\n    if (file.size > 5 * 1024 * 1024) {\n      mostrarMensaje(\"El archivo no puede superar los 5MB.\", \"error\");\n      return;\n    }\n    setComprobante(file);\n    if (file.type.startsWith(\"image/\")) {\n      setPreview(URL.createObjectURL(file));\n    } else {\n      setPreview(null);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!metodo) {\n      mostrarMensaje(\"Por favor, selecciona un m√©todo de pago.\", \"error\");\n      return;\n    }\n    if (!nombre.trim() || !correo.trim()) {\n      mostrarMensaje(\"Por favor, ingresa tu nombre y correo.\", \"error\");\n      return;\n    }\n    if ((metodo === \"Banco Pichincha\" || metodo === \"De Una\" || metodo === \"Produbanco\") && !comprobante) {\n      mostrarMensaje(\"Debes subir el comprobante de la transferencia.\", \"error\");\n      return;\n    }\n    setProcesandoPago(true);\n    try {\n      const formData = new FormData();\n      formData.append(\"nombre\", nombre);\n      formData.append(\"correo\", correo);\n      formData.append(\"telefono\", telefono);\n      formData.append(\"metodoPago\", metodo);\n      formData.append(\"pedido\", JSON.stringify(pedidoInfo));\n      if (comprobante) formData.append(\"comprobante\", comprobante);\n      const res = await fetch(\"/api/pagos/enviar-comprobante\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (!res.ok) throw new Error(\"Error al enviar comprobante\");\n      mostrarMensaje(\"‚úÖ Pago confirmado y comprobante enviado. Te contactaremos pronto.\", \"success\");\n      localStorage.removeItem(\"pedidoActual\");\n      localStorage.removeItem(\"carrito\");\n      setTimeout(() => navigate('/tienda'), 3000);\n    } catch (error) {\n      console.error(error);\n      mostrarMensaje(\"‚ùå Error al procesar el pago. Intenta de nuevo.\", \"error\");\n    } finally {\n      setProcesandoPago(false);\n    }\n  };\n  const mostrarMensaje = (texto, tipo) => {\n    const mensaje = document.createElement('div');\n    mensaje.className = `mp-mensaje mp-mensaje-${tipo}`;\n    mensaje.textContent = texto;\n    document.body.appendChild(mensaje);\n    setTimeout(() => {\n      if (document.body.contains(mensaje)) {\n        document.body.removeChild(mensaje);\n      }\n    }, 5000);\n  };\n  const calcularTotalConComision = () => {\n    var _datosPago$metodo;\n    if (!pedidoInfo || !metodo) return 0;\n    const comision = ((_datosPago$metodo = datosPago[metodo]) === null || _datosPago$metodo === void 0 ? void 0 : _datosPago$metodo.comision) || 0;\n    return (pedidoInfo.total + comision).toFixed(2);\n  };\n  const crearOpcionMetodo = opcion => /*#__PURE__*/_jsxDEV(\"label\", {\n    className: `mp-metodo-option ${metodo === opcion ? \"mp-active\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"radio\",\n      value: opcion,\n      checked: metodo === opcion,\n      onChange: e => setMetodo(e.target.value),\n      className: \"mp-radio-input\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mp-metodo-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-metodo-imagen-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: datosPago[opcion].imagen,\n          alt: opcion,\n          className: \"mp-metodo-imagen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-metodo-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mp-metodo-nombre\",\n          children: opcion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mp-metodo-tipo\",\n          children: datosPago[opcion].tipo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), datosPago[opcion].comision > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mp-comision\",\n          children: [\"+$\", datosPago[opcion].comision, \" comisi\\xF3n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-check-icon\",\n        children: metodo === opcion && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u2713\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, opcion, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n  const crearInfoPago = () => {\n    if (!metodo) return null;\n    const datos = datosPago[metodo];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mp-info-pago\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-info-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: datos.imagen,\n          alt: metodo,\n          className: \"mp-info-imagen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Instrucciones para \", metodo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-info-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: datos.descripcion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), datos.cuenta && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: datos.cuenta\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 28\n        }, this), datos.titular && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Titular:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 32\n          }, this), \" \", datos.titular]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }, this), datos.cedula && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: datos.cedula\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 28\n        }, this), (metodo === \"Banco Pichincha\" || metodo === \"De Una\" || metodo === \"Produbanco\") && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mp-comprobante-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCC2 Sube el comprobante de tu transferencia:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".jpg,.jpeg,.png,.gif,.pdf\",\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this), preview && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview,\n            alt: \"Vista previa comprobante\",\n            className: \"mp-comprobante-preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 27\n          }, this), comprobante && comprobante.type === \"application/pdf\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDCC4 \", comprobante.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 73\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this), metodo === \"Efectivo\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mp-efectivo-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCCD Direcci\\xF3n: Av. Principal 123, Centro Comercial Plaza, Local 45\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDD52 Horarios: Lunes a Viernes 9:00 AM - 6:00 PM\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCDE Tel\\xE9fono: +593 99 123 4567\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this);\n  };\n  if (!pedidoInfo) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mp-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Cargando informaci\\xF3n del pedido...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mp-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mp-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/cart'),\n        className: \"mp-btn-volver\",\n        children: \"\\u2190 Volver al Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCB3 M\\xE9todo de Pago\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mp-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mp-resumen-pedido\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCCB Resumen del Pedido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), pedidoInfo.productos.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mp-producto-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: p.imagen || '/imagenes/placeholder.jpg',\n            alt: p.nombre,\n            className: \"mp-producto-imagen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mp-producto-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mp-producto-nombre\",\n              children: p.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mp-producto-precio\",\n              children: [\"$\", p.precio]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mp-totales\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", pedidoInfo.subtotal]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Env\\xEDo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: pedidoInfo.envio === 0 ? 'GRATIS' : `$${pedidoInfo.envio}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), metodo && datosPago[metodo].comision > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Comisi\\xF3n \", metodo, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 63\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"+$\", datosPago[metodo].comision]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 94\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 58\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mp-total-final\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 51\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\"$\", metodo ? calcularTotalConComision() : pedidoInfo.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 87\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 81\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"mp-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDC64 Informaci\\xF3n del Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nombre completo\",\n          value: nombre,\n          onChange: e => setNombre(e.target.value),\n          className: \"mp-input\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Correo electr\\xF3nico\",\n          value: correo,\n          onChange: e => setCorreo(e.target.value),\n          className: \"mp-input\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCB3 Selecciona tu M\\xE9todo de Pago\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mp-metodos-container\",\n          children: Object.keys(datosPago).map(opcion => crearOpcionMetodo(opcion))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"mp-btn-confirmar\",\n          disabled: procesandoPago,\n          children: procesandoPago ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\u23F3 Enviando...\"\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"\\u2705 Confirmar Pago - $\", metodo ? calcularTotalConComision() : pedidoInfo.total]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), crearInfoPago()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n}\n_s(MetodoPago, \"gSQOk/jL9pe/asjfcB3Mf3f8prA=\", false, function () {\n  return [useNavigate];\n});\n_c = MetodoPago;\nexport default MetodoPago;\nvar _c;\n$RefreshReg$(_c, \"MetodoPago\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","MetodoPago","_s","metodo","setMetodo","nombre","setNombre","correo","setCorreo","telefono","setTelefono","comprobante","setComprobante","preview","setPreview","pedidoInfo","setPedidoInfo","procesandoPago","setProcesandoPago","navigate","pedido","JSON","parse","localStorage","getItem","datosPago","descripcion","cuenta","titular","cedula","imagen","tipo","comision","handleFileChange","e","file","target","files","allowedTypes","includes","type","mostrarMensaje","size","startsWith","URL","createObjectURL","handleSubmit","preventDefault","trim","formData","FormData","append","stringify","res","fetch","method","body","ok","Error","removeItem","setTimeout","error","console","texto","mensaje","document","createElement","className","textContent","appendChild","contains","removeChild","calcularTotalConComision","_datosPago$metodo","total","toFixed","crearOpcionMetodo","opcion","children","value","checked","onChange","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","crearInfoPago","datos","accept","name","onClick","productos","map","p","i","precio","subtotal","envio","onSubmit","placeholder","required","Object","keys","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Alumno/Descargas/proyecto-Rea/frontend/src/components/MetodoPago.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./metodoPago.css\";\r\n\r\nfunction MetodoPago() {\r\n  const [metodo, setMetodo] = useState(\"\");\r\n  const [nombre, setNombre] = useState(\"\");\r\n  const [correo, setCorreo] = useState(\"\");\r\n  const [telefono, setTelefono] = useState(\"\");\r\n  const [comprobante, setComprobante] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [pedidoInfo, setPedidoInfo] = useState(null);\r\n  const [procesandoPago, setProcesandoPago] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // Cargar informaci√≥n del pedido desde localStorage\r\n  useEffect(() => {\r\n    const pedido = JSON.parse(localStorage.getItem(\"pedidoActual\"));\r\n    if (pedido) {\r\n      setPedidoInfo(pedido);\r\n    } else {\r\n      navigate('/cart');\r\n    }\r\n  }, [navigate]);\r\n\r\n  const datosPago = {\r\n    \"Banco Pichincha\": { descripcion: \"Transferencia bancaria a la siguiente cuenta:\", cuenta: \"Cuenta Corriente: 2200154789\", titular: \"Juan P√©rez\", cedula: \"C√©dula: 0102030405\", imagen: \"/imagenes/BancoPichincha.png\", tipo: \"transferencia\", comision: 0 },\r\n    \"De Una\": { descripcion: \"Pago r√°pido a trav√©s de la app De Una:\", cuenta: \"N√∫mero de cuenta: 0998765432\", titular: \"Maria G√≥mez\", cedula: \"C√©dula: 1102030405\", imagen: \"/imagenes/DeUna!.png\", tipo: \"transferencia\", comision: 0 },\r\n    \"Produbanco\": { descripcion: \"Transferencia a Produbanco:\", cuenta: \"Cuenta Ahorros: 4567891230\", titular: \"Carlos Torres\", cedula: \"C√©dula: 1702030405\", imagen: \"/imagenes/Produbanco.png\", tipo: \"transferencia\", comision: 0 },\r\n    \"Efectivo\": { descripcion: \"Paga en efectivo al momento de recibir el producto o en nuestras oficinas.\", cuenta: \"\", titular: \"\", cedula: \"\", imagen: \"/imagenes/dinero-removebg-preview.png\", tipo: \"efectivo\", comision: 2.50 }\r\n  };\r\n\r\n  // Manejar subida de comprobante\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/gif\", \"application/pdf\"];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      mostrarMensaje(\"Formato no v√°lido. Solo JPG, PNG, GIF o PDF.\", \"error\");\r\n      return;\r\n    }\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      mostrarMensaje(\"El archivo no puede superar los 5MB.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setComprobante(file);\r\n    if (file.type.startsWith(\"image/\")) {\r\n      setPreview(URL.createObjectURL(file));\r\n    } else {\r\n      setPreview(null);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!metodo) {\r\n      mostrarMensaje(\"Por favor, selecciona un m√©todo de pago.\", \"error\");\r\n      return;\r\n    }\r\n    if (!nombre.trim() || !correo.trim()) {\r\n      mostrarMensaje(\"Por favor, ingresa tu nombre y correo.\", \"error\");\r\n      return;\r\n    }\r\n    if ((metodo === \"Banco Pichincha\" || metodo === \"De Una\" || metodo === \"Produbanco\") && !comprobante) {\r\n      mostrarMensaje(\"Debes subir el comprobante de la transferencia.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setProcesandoPago(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"nombre\", nombre);\r\n      formData.append(\"correo\", correo);\r\n      formData.append(\"telefono\", telefono);\r\n      formData.append(\"metodoPago\", metodo);\r\n      formData.append(\"pedido\", JSON.stringify(pedidoInfo));\r\n      if (comprobante) formData.append(\"comprobante\", comprobante);\r\n\r\n      const res = await fetch(\"/api/pagos/enviar-comprobante\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Error al enviar comprobante\");\r\n\r\n      mostrarMensaje(\"‚úÖ Pago confirmado y comprobante enviado. Te contactaremos pronto.\", \"success\");\r\n\r\n      localStorage.removeItem(\"pedidoActual\");\r\n      localStorage.removeItem(\"carrito\");\r\n\r\n      setTimeout(() => navigate('/tienda'), 3000);\r\n    } catch (error) {\r\n      console.error(error);\r\n      mostrarMensaje(\"‚ùå Error al procesar el pago. Intenta de nuevo.\", \"error\");\r\n    } finally {\r\n      setProcesandoPago(false);\r\n    }\r\n  };\r\n\r\n  const mostrarMensaje = (texto, tipo) => {\r\n    const mensaje = document.createElement('div');\r\n    mensaje.className = `mp-mensaje mp-mensaje-${tipo}`;\r\n    mensaje.textContent = texto;\r\n    document.body.appendChild(mensaje);\r\n\r\n    setTimeout(() => {\r\n      if (document.body.contains(mensaje)) {\r\n        document.body.removeChild(mensaje);\r\n      }\r\n    }, 5000);\r\n  };\r\n\r\n  const calcularTotalConComision = () => {\r\n    if (!pedidoInfo || !metodo) return 0;\r\n    const comision = datosPago[metodo]?.comision || 0;\r\n    return (pedidoInfo.total + comision).toFixed(2);\r\n  };\r\n\r\n  const crearOpcionMetodo = (opcion) => (\r\n    <label key={opcion} className={`mp-metodo-option ${metodo === opcion ? \"mp-active\" : \"\"}`}>\r\n      <input type=\"radio\" value={opcion} checked={metodo === opcion} onChange={(e) => setMetodo(e.target.value)} className=\"mp-radio-input\" />\r\n      <div className=\"mp-metodo-content\">\r\n        <div className=\"mp-metodo-imagen-container\">\r\n          <img src={datosPago[opcion].imagen} alt={opcion} className=\"mp-metodo-imagen\" />\r\n        </div>\r\n        <div className=\"mp-metodo-info\">\r\n          <span className=\"mp-metodo-nombre\">{opcion}</span>\r\n          <span className=\"mp-metodo-tipo\">{datosPago[opcion].tipo}</span>\r\n          {datosPago[opcion].comision > 0 && <span className=\"mp-comision\">+${datosPago[opcion].comision} comisi√≥n</span>}\r\n        </div>\r\n        <div className=\"mp-check-icon\">{metodo === opcion && <span>‚úì</span>}</div>\r\n      </div>\r\n    </label>\r\n  );\r\n\r\n  const crearInfoPago = () => {\r\n    if (!metodo) return null;\r\n    const datos = datosPago[metodo];\r\n\r\n    return (\r\n      <div className=\"mp-info-pago\">\r\n        <div className=\"mp-info-header\">\r\n          <img src={datos.imagen} alt={metodo} className=\"mp-info-imagen\" />\r\n          <h3>Instrucciones para {metodo}</h3>\r\n        </div>\r\n        <div className=\"mp-info-details\">\r\n          <p>{datos.descripcion}</p>\r\n          {datos.cuenta && <p><strong>{datos.cuenta}</strong></p>}\r\n          {datos.titular && <p><strong>Titular:</strong> {datos.titular}</p>}\r\n          {datos.cedula && <p><strong>{datos.cedula}</strong></p>}\r\n\r\n          {(metodo === \"Banco Pichincha\" || metodo === \"De Una\" || metodo === \"Produbanco\") && (\r\n            <div className=\"mp-comprobante-container\">\r\n              <p>üìÇ Sube el comprobante de tu transferencia:</p>\r\n              <input type=\"file\" accept=\".jpg,.jpeg,.png,.gif,.pdf\" onChange={handleFileChange} />\r\n              {preview && <img src={preview} alt=\"Vista previa comprobante\" className=\"mp-comprobante-preview\" />}\r\n              {comprobante && comprobante.type === \"application/pdf\" && <p>üìÑ {comprobante.name}</p>}\r\n            </div>\r\n          )}\r\n\r\n          {metodo === \"Efectivo\" && (\r\n            <div className=\"mp-efectivo-info\">\r\n              <p>üìç Direcci√≥n: Av. Principal 123, Centro Comercial Plaza, Local 45</p>\r\n              <p>üïí Horarios: Lunes a Viernes 9:00 AM - 6:00 PM</p>\r\n              <p>üìû Tel√©fono: +593 99 123 4567</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!pedidoInfo) {\r\n    return (\r\n      <div className=\"mp-loading\">\r\n        <div className=\"mp-spinner\"></div>\r\n        <p>Cargando informaci√≥n del pedido...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"mp-container\">\r\n      <div className=\"mp-header\">\r\n        <button onClick={() => navigate('/cart')} className=\"mp-btn-volver\">‚Üê Volver al Carrito</button>\r\n        <h1>üí≥ M√©todo de Pago</h1>\r\n      </div>\r\n\r\n      <div className=\"mp-content\">\r\n        {/* Resumen Pedido */}\r\n        <div className=\"mp-resumen-pedido\">\r\n          <h3>üìã Resumen del Pedido</h3>\r\n          {pedidoInfo.productos.map((p, i) => (\r\n            <div key={i} className=\"mp-producto-item\">\r\n              <img src={p.imagen || '/imagenes/placeholder.jpg'} alt={p.nombre} className=\"mp-producto-imagen\" />\r\n              <div className=\"mp-producto-info\">\r\n                <span className=\"mp-producto-nombre\">{p.nombre}</span>\r\n                <span className=\"mp-producto-precio\">${p.precio}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div className=\"mp-totales\">\r\n            <div><span>Subtotal:</span><span>${pedidoInfo.subtotal}</span></div>\r\n            <div><span>Env√≠o:</span><span>{pedidoInfo.envio === 0 ? 'GRATIS' : `$${pedidoInfo.envio}`}</span></div>\r\n            {metodo && datosPago[metodo].comision > 0 && <div><span>Comisi√≥n {metodo}:</span><span>+${datosPago[metodo].comision}</span></div>}\r\n            <div className=\"mp-total-final\"><span><strong>Total:</strong></span><span><strong>${metodo ? calcularTotalConComision() : pedidoInfo.total}</strong></span></div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Formulario */}\r\n        <form onSubmit={handleSubmit} className=\"mp-form\">\r\n          <h3>üë§ Informaci√≥n del Cliente</h3>\r\n          <input type=\"text\" placeholder=\"Nombre completo\" value={nombre} onChange={(e) => setNombre(e.target.value)} className=\"mp-input\" required />\r\n          <input type=\"email\" placeholder=\"Correo electr√≥nico\" value={correo} onChange={(e) => setCorreo(e.target.value)} className=\"mp-input\" required />\r\n        \r\n          <h3>üí≥ Selecciona tu M√©todo de Pago</h3>\r\n          <div className=\"mp-metodos-container\">\r\n            {Object.keys(datosPago).map((opcion) => crearOpcionMetodo(opcion))}\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"mp-btn-confirmar\" disabled={procesandoPago}>\r\n            {procesandoPago ? <>‚è≥ Enviando...</> : <>‚úÖ Confirmar Pago - ${metodo ? calcularTotalConComision() : pedidoInfo.total}</>}\r\n          </button>\r\n        </form>\r\n\r\n        {crearInfoPago()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MetodoPago;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}